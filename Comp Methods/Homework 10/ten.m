clear;
clc

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Question 1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

load hw10_1_data;

n = 15;
m = 2;
N = 82;

B = 2000;
bx = zeros(n, m, B);
for i = 1:B
    ind = randsample(N, n, 'true');
    bx(:,:,i) = X(ind,:);
end

% corrcoefs
for i = 1:B
    temp = corrcoef(bx(:,1,i), bx(:,2,i));
    cc(i) = temp(1,2);
end

% standard errors
t = B/100:B/100:B;
for k = 1:100
    sdcc(k) = std(cc(1:k*B/100));
end

figure(1);
plot(cc);
xlabel('B', 'fontsize', 16);
ylabel('CC')

figure(2);
plot(t, sdcc);
xlabel('B', 'fontsize', 16);
ylabel('SE_B', 'fontsize', 16);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%% Question 2 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%